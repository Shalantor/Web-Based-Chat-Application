<!doctype html>
<html>

<head>
  <title> Temporary login page to verify login functionality </title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="/css/chat.css">
</head>

<body>

  <!-- Navigation bar -->
  <div class="container">

    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="/profile">
            <img alt = "Brand" src="public/brand.png"> <!-- TODO:Check why image doesnt get rendered -->
          </a>
        </div>
        <a href="/logout" class="btn btn-default navbar-btn navbar-right" href="/logout">Logout</a>
      </div>
    </nav>

  </div>

  <div class = "content">
    <div class = "left">
      <div class="friendsWindow">
        <p>Friends</p>
        <ul>
        <ul/>
      </div>
      <div class="groupsWindow">
        <p>Groups</p>
        <ul>
        <ul/>
      </div>
    </div>


    <div class = "middle">
      <div class="chat_window">
        <ul>
        <ul/>
      </div>

      <div class = "chatform">
        <form action= "" >
          <input id="message" autocomplete="off" /><button>Send</button>
        </form>
      </div>
    </div>

    <div class = "right">
      <div class = "findUserForm">
        <form action= "" >
          <input id="search" autocomplete="off" /><button>Find friend</button>
        </form>
      </div>
      <div class="find_window">
        <ul id="users_found">
        <ul/>
      </div>
  </div>

<!-- Script to send server a request to look for friends-->
<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script>
  var socket = io();
  socket.on('ehlo',function(msg){
    socket.emit('ehlo-response',<%- JSON.stringify(user) %>);
  });
  $(function () {
    var socket = io();
    $('.right .findUserForm form').submit(function(){
      socket.emit('find-user', $('#search').val());
      $('#search').val('');
      return false;
    });
    socket.on('find-user-response', function(msg){
      $('.right .find_window #users_found').append($('<li>').text(msg));
    });
  });
</script>

</body>

</html>
